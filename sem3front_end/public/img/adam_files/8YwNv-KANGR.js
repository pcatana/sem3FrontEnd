if (self.CavalryLogger) { CavalryLogger.start_js(["1R2HX"]); }

__d("VideoEditTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:VideoEditLoggerConfig",this.$VideoEditTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:VideoEditLoggerConfig",this.$VideoEditTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoEditTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoEditTypedLogger1=babelHelpers["extends"]({},this.$VideoEditTypedLogger1,j);return this};h.prototype.setCaptionsCount=function(j){this.$VideoEditTypedLogger1.captions_count=j;return this};h.prototype.setChangedTitle=function(j){this.$VideoEditTypedLogger1.changed_title=j;return this};h.prototype.setEmbeddable=function(j){this.$VideoEditTypedLogger1.embeddable=j;return this};h.prototype.setEvent=function(j){this.$VideoEditTypedLogger1.event=j;return this};h.prototype.setExpirationTime=function(j){this.$VideoEditTypedLogger1.expiration_time=j;return this};h.prototype.setExpirationType=function(j){this.$VideoEditTypedLogger1.expiration_type=j;return this};h.prototype.setExpiredNow=function(j){this.$VideoEditTypedLogger1.expired_now=j;return this};h.prototype.setFlow=function(j){this.$VideoEditTypedLogger1.flow=j;return this};h.prototype.setHasContentCategoryChanged=function(j){this.$VideoEditTypedLogger1.has_content_category_changed=j;return this};h.prototype.setHasContentTagsChanged=function(j){this.$VideoEditTypedLogger1.has_content_tags_changed=j;return this};h.prototype.setPublishNow=function(j){this.$VideoEditTypedLogger1.publish_now=j;return this};h.prototype.setSource=function(j){this.$VideoEditTypedLogger1.source=j;return this};h.prototype.setVC=function(j){this.$VideoEditTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$VideoEditTypedLogger1.video_id=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$VideoEditTypedLogger1=babelHelpers["extends"]({},this.$VideoEditTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={captions_count:true,changed_title:true,embeddable:true,event:true,expiration_time:true,expiration_type:true,expired_now:true,flow:true,has_content_category_changed:true,has_content_tags_changed:true,publish_now:true,source:true,vc:true,video_id:true};f.exports=h}),null);
__d("ReactComposerBackdateTaggerButton.react",["cx","fbt","React","ReactComposerLoggingName","ReactComposerTaggerButtonMixin","ReactComposerTaggerType"],(function a(b,c,d,e,f,g,h,i){var j=c("React").createClass({displayName:"ReactComposerBackdateTaggerButton",mixins:[c("ReactComposerTaggerButtonMixin")],statics:{taggerID:c("ReactComposerTaggerType").BACKDATE,loggingName:c("ReactComposerLoggingName").BACKDATE_TAGGER},getTitle:function k(){return i._("Set date and time of your post")},getTooltip:function k(){return i._("Set date and time of your post")},getClassName:function k(){return"_4ve3"}});f.exports=j}),null);
__d("ProgressiveDateAndTimePicker.react",["cx","fbt","InlineBlock.react","React","XUIProgressiveDatepicker.react","XUISelector.react","formatDate"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("XUISelector.react").Option,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={datePickerResult:{year:this.props.initialYear,month:this.props.initialMonth,day:this.props.initialDay},hour:this.props.initialHour,minute:this.props.initialMinute},this.onDateChange=function(t){this.setState({datePickerResult:t},this.onDateAndTimeChange)}.bind(this),this.onDateAndTimeChange=function(){if(!this.props.onDateAndTimeChange)return;var t=this.state.datePickerResult,u=babelHelpers["extends"]({},t,{hour:this.state.hour,minute:this.state.minute});this.props.onDateAndTimeChange(u)}.bind(this),this.onHourChange=function(event){this.onSelectorChange(event,"hour")}.bind(this),this.onMinuteChange=function(event){this.onSelectorChange(event,"minute")}.bind(this),this.onSelectorChange=function(event,t){var u=event.target?event.target.value:event.value,v={};v[t]=u;this.setState(v,this.onDateAndTimeChange)}.bind(this),p}n.prototype.componentWillReceiveProps=function(o){"use strict";var p=this.state,q=p.datePickerResult;if(o.initialYear!==q.year||o.initialMonth!==q.month||o.initialDay!==q.day||o.initialHour!==p.hour||o.initialMinute!==p.minute)this.setState({datePickerResult:{year:o.initialYear,month:o.initialMonth,day:o.initialDay},hour:o.initialHour,minute:o.initialMinute})};n.prototype.render=function(){"use strict";__p&&__p();var o,p;if(this.state.datePickerResult.day){var q=[c("React").createElement(l,{key:-1,value:-1},i._("Hour:"))];for(var r=0;r<24;r++){var s=new Date();s.setHours(r);var t=c("formatDate")(s,"g A");q.push(c("React").createElement(l,{key:r,value:r},t))}o=c("React").createElement(c("XUISelector.react"),{className:"_5vu1",disabled:!this.state.datePickerResult.day,maxheight:this.props.menuMaxHeight,name:this.props.inputPrefix+"_hour",onChange:this.onHourChange,value:this.state.hour},q)}if(this.state.hour!=-1){var u=[c("React").createElement(l,{key:-1,value:-1},i._("Minute:"))];for(r=0;r<60;r+=10){var v="00";if(r>0)v=r;u.push(c("React").createElement(l,{key:r,value:r},v))}p=c("React").createElement(c("XUISelector.react"),{className:"_5vu1",disabled:this.state.hour==-1,maxheight:this.props.menuMaxHeight,name:this.props.inputPrefix+"_minute",onChange:this.onMinuteChange,value:this.state.minute},u)}return c("React").createElement(c("InlineBlock.react"),{className:this.props.className},c("React").createElement(c("XUIProgressiveDatepicker.react"),babelHelpers["extends"]({},this.props,{setDateTo:this.state.datePickerResult,onDateChange:this.onDateChange})),o,p)};n.propTypes=babelHelpers["extends"]({},c("XUIProgressiveDatepicker.react").propTypes,{initialHour:m.number,initialMinute:m.number});n.defaultProps={initialYear:0,initialMonth:0,initialDay:0,initialHour:-1,initialMinute:-1,maxTime:Date.now()/1e3,minTime:new Date(1906,0,0,0,0).getTime()/1e3};f.exports=n}),null);
__d("ReactComposerBackdateTaggerComponent.react",["cx","fbt","Grid.react","ProgressiveDateAndTimePicker.react","React","XUICloseButton.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem,m=c("React").PropTypes,n={day:0,hour:-1,minute:-1,month:0,year:0};j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$ReactComposerBackdateTaggerComponent1=function(u){this.props.onSelect(u)}.bind(this),this.$ReactComposerBackdateTaggerComponent2=function(){this.$ReactComposerBackdateTaggerComponent1(n)}.bind(this),q}o.prototype.render=function(){"use strict";var p=this.props.taggerData.year>0?c("React").createElement(c("XUICloseButton.react"),{className:"_3mjw",onClick:this.$ReactComposerBackdateTaggerComponent2,size:"small"}):null;return c("React").createElement(c("Grid.react"),{cols:2,className:"_5esl",role:"presentation"},c("React").createElement(l,{key:"prefix",className:"_5esm",role:"presentation"},i._("When")),c("React").createElement(l,{key:"tagger",className:"_5esw _3mjx",role:"presentation"},c("React").createElement(c("ProgressiveDateAndTimePicker.react"),{className:"_5bm1",initialYear:this.props.taggerData.year,initialMonth:this.props.taggerData.month,initialDay:this.props.taggerData.day,initialHour:this.props.taggerData.hour,initialMinute:this.props.taggerData.minute,descendingYears:true,onDateAndTimeChange:this.$ReactComposerBackdateTaggerComponent1,menuMaxHeight:235}),p))};o.propTypes={taggerData:m.object.isRequired,onSelect:m.func.isRequired};o.defaultProps={taggerData:{},onSelect:c("emptyFunction")};f.exports=o}),null);
__d("ReactComposerBackdateTaggerContainer.react",["React","ReactComposerBackdateTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerContainerMixin","ReactComposerTaggerType"],(function a(b,c,d,e,f,g){var h=c("React").createClass({displayName:"ReactComposerBackdateTaggerContainer",mixins:[c("ReactComposerTaggerContainerMixin")()],statics:{taggerID:c("ReactComposerTaggerType").BACKDATE,loggingName:c("ReactComposerLoggingName").BACKDATE_TAGGER,taggerComponent:c("ReactComposerBackdateTaggerComponent.react")}});f.exports=h}),null);
__d("URLVideoThumbnail",["VideoThumbnail"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("VideoThumbnail"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k)}f.exports=j}),null);
__d("VideoComposerDialogBody.react",["cx","fbt","ReactComposerFundraiserAttachmentContainerGated","ComposerVideoUploadActions","ComposerVideoUploadDetails.react","ComposerVideoUploadStore","Layout.react","MentionsInputUtility","MultilingualPostMessageActions","MultilingualPostMessageEditorContainer.react","React","ReactComposerBody.react","ReactComposerContextTypes","ReactComposerContextProviderMixin","ReactComposerMultilingualStatusContainer.react","ReactComposerProfilePhoto.react","VideoEditMentionsTextArea.react","classWithMixins","getByPath","getMentionsInputDecorator","getMentionsTextForContentState","mixin"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("ReactComposerFundraiserAttachmentContainerGated").module,m=c("Layout.react").Column,n=c("Layout.react").FillColumn,o=c("React").createClass({displayName:"Wrapper",mixins:[c("ReactComposerContextProviderMixin")],render:function r(){return c("React").createElement(c("ComposerVideoUploadDetails.react"),{selectedThumbnail:this.props.selectedThumbnail,stage:this.props.stage,thumbnails:this.props.thumbnails,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,showAttributionsSection:this.props.showAttributionsSection,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,composerID:this.props.composerID,showAdBreaksTabBlockListSettings:this.props.showAdBreaksTabBlockListSettings,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,showUploadProgressBar:false,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,generateThumbnails:false,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showCaptionsTab:this.props.showCaptionsTab,showPermissionsTab:this.props.showPermissionsTab,showSecretVideoOption:this.props.showSecretVideoOption,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.props.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,showSphericalControlsTab:this.props.showSphericalControlsTab,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,errorMessage:this.props.errorMessage,errorCode:this.props.errorCode,videoID:this.props.videoID,videoAssetID:this.props.videoAssetID,improvedContentTags:this.props.improvedContentTags,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isSharedAsset:this.props.isSharedAsset,isVideoUpload:false,allowCustomThumbnail:this.props.allowCustomThumbnail,isReferenceVideo:this.props.isReferenceVideo,showTagSelectorToken:this.props.showTagSelectorToken,accessToken:this.props.accessToken,pageAccessToken:this.props.pageAccessToken,targetID:c("getByPath")(this.props,["contextConfig","actorID"]),isSecret:this.props.isSecret,canMakeFeatured:this.props.canMakeFeatured,isFeatured:this.props.isFeatured,onMakeFeaturedVideo:this.props.onMakeFeaturedVideo,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,dialogVisible:this.props.dialogVisible,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,isShowPage:this.props.isShowPage,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches})}});j=babelHelpers.inherits(p,c("classWithMixins")(c("React").Component,c("mixin")(c("ReactComposerContextProviderMixin"))));k=j&&j.prototype;function p(r){"use strict";k.constructor.call(this,r);q.call(this);var s=r.contextConfig.composerID,t=c("ComposerVideoUploadStore").getDescription(s);this.state={errorMessage:null,stage:"uploading",editorState:c("MentionsInputUtility").createFromTextWithMentions(t,c("getMentionsInputDecorator")()),thumbnails:r.thumbnails,selectedThumbnail:r.selectedThumbnail,editorStateContent:t,showFeedTypeCheckbox:r.showFeedTypeCheckbox}}p.prototype.componentDidMount=function(){"use strict";if(this.props.isMultilingualPost)c("MultilingualPostMessageActions").startedUpdatingVideoMessage(this.props.postID)};p.prototype.render=function(){"use strict";var r=this.props.isCarouselPreviewEditing?null:c("React").createElement(c("VideoEditMentionsTextArea.react"),{className:"_3xjx _52oj",placeholder:i._("Say something about this video. This description will appear with your video on Facebook."),searchSource:this.props.mentionsSource,ref:"status",editorState:this.state.editorState,onChange:this.onDescriptionChange,textWithMentions:this.state.editorStateContent}),s=c("React").createElement(c("MultilingualPostMessageEditorContainer.react"),{contentID:this.props.postID}),t=this.props.showMultilingualOnMonolingualPost&&!this.props.isMultilingualPost;return c("React").createElement(c("ReactComposerBody.react"),{className:"_1ncl"+(this.props.isShowPage?" _3hx7":"")},c("React").createElement(c("Layout.react"),{className:this.props.pagePicture?"_3-97":""},this.props.pagePicture?c("React").createElement(m,null,c("React").createElement(c("ReactComposerProfilePhoto.react"),{src:this.props.pagePicture,onClick:function u(){}})):null,c("React").createElement(n,null,this.props.isMultilingualPost?s:r)),t?c("React").createElement(c("ReactComposerMultilingualStatusContainer.react"),{onChange:function u(){}}):null,c("React").createElement(o,{contextConfig:this.props.contextConfig,composerID:this.props.contextConfig.composerID,showAdBreaksTabBlockListSettings:this.props.showAdBreaksTabBlockListSettings,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,thumbnails:this.state.thumbnails,selectedThumbnail:this.state.selectedThumbnail,generateThumbnails:false,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showSecretVideoOption:this.props.showSecretVideoOption,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.props.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showAttributionsSection:this.props.showAttributionsSection,showSphericalControlsTab:this.props.showSphericalControlsTab,showPermissionsTab:this.props.showPermissionsTab,showCaptionsTab:this.props.showCaptionsTab,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,errorMessage:this.state.errorMessage,errorCode:null,stage:this.state.stage,videoID:this.props.videoID,videoAssetID:this.props.videoAssetID,improvedContentTags:this.props.improvedContentTags,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isSharedAsset:this.props.isSharedAsset,isShowPage:this.props.isShowPage,isReferenceVideo:this.props.isReferenceVideo,allowCustomThumbnail:this.props.allowCustomThumbnail,showTagSelectorToken:this.props.showTagSelectorToken,accessToken:this.props.accessToken,pageAccessToken:this.props.pageAccessToken,targetID:c("getByPath")(this.props,["contextConfig","actorID"]),isSecret:this.props.isSecret,canMakeFeatured:this.props.canMakeFeatured,isFeatured:this.props.isFeatured,onMakeFeaturedVideo:this.props.onMakeFeaturedVideo,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,dialogVisible:this.props.dialogVisible,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches}),l?c("React").createElement(l,null):null)};p.defaultProps={canEditCustomLabels:false,canEditExternalVideoID:false,showAdBreaksTab:false,adBreaksTabDisabledReasons:null,showAdBreaksTabBlockListSettings:false,canEditAdBreaksTabBlockListContent:false,showAdBreakAdminPreviewSettings:false,showAdBreakOffsetEditorNux:false,shouldUseNewAdBreakOffsetEditor:false,showCustomLabels:false,showExternalVideoIDSection:false,showSecretVideoOption:false,showCopyrightSection:false,showCategoryRequiredError:false,showAdvancedTabSphericalCheckbox:false,showAttributionsSection:false,showSphericalControlsTab:false,showOmnistabSection:false,hasOmnistabEncoding:false,isCarouselPreviewEditing:false,isEditing:true,isSharedAsset:false,showCrosspostingHelpCenter:false,showPermissionsTab:false,showFeedTypeCheckbox:false,showMultilingualOnMonolingualPost:false,isMultilingualPost:false,showCaptionsTab:true,canSeeIGMatches:false};var q=function q(){this.onDescriptionChange=function(r){var s=c("getMentionsTextForContentState")(r.getCurrentContent()),t=c("ComposerVideoUploadStore").getDescription(this.props.contextConfig.composerID);if(s!==t){c("ComposerVideoUploadActions").updateDescription(this.props.contextConfig.composerID,s);this.setState({editorState:r,editorStateContent:s})}}.bind(this)};p.childContextTypes=c("ReactComposerContextTypes");f.exports=p}),null);
__d("VideoCaptionURL",["VideoCaption"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VideoCaption"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this,l,m);this.$VideoCaptionURL1=k}j.prototype.getURL=function(){"use strict";return this.$VideoCaptionURL1};f.exports=j}),null);
__d("VideoEditPublishingSelector.react",["cx","React","VideoEditPublishingAction","VideoEditPublishingStatus","VideoPublishingState","VideoPublishingStateIndicator.react","VideoPublishingStateIndicatorUtils","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("XUISingleSelector.react").Option,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.getStateToolTip=function(n){"use strict";var o=this.props.publishingConfig,p=this.props.creationTime,q=o.expirationTime,r=o.scheduledPublishTime;return c("VideoPublishingStateIndicatorUtils").getStateToolTip(n,{creationTime:p,expirationTime:q&&q/1e3,isVideoAsset:false,postsCount:1,publishTime:r&&r/1e3||p})};m.prototype.render=function(){"use strict";__p&&__p();var n=this.props.options.map(function(o){__p&&__p();var p=o.type,q=o.value,r=void 0,s=void 0,t=void 0;if(p=="status"){r=c("VideoEditPublishingStatus")[q];s=r.value;t=this.getStateToolTip(s)}else{r=c("VideoEditPublishingAction")[q];switch(q.toLowerCase()){case c("VideoEditPublishingAction").MAKE_DRAFT.value:s=c("VideoPublishingState").DRAFT;break;case c("VideoEditPublishingAction").SCHEDULE_PUBLISH.value:s=c("VideoPublishingState").SCHEDULED;break;case c("VideoEditPublishingAction").PUBLISH.value:s=c("VideoPublishingState").PUBLISHED;break;case c("VideoEditPublishingAction").SCHEDULE_EXPIRATION.value:s=c("VideoPublishingState").EXPIRING;break;case c("VideoEditPublishingAction").EXPIRE.value:s=c("VideoPublishingState").EXPIRED;break;default:s="unknown";break}}return c("React").createElement(k,{key:r.value,value:r.value},c("React").createElement(c("VideoPublishingStateIndicator.react"),{className:"_3mto",state:s,toolTip:t,toolTipAlignH:"center",toolTipPosition:"above"}),r.label)}.bind(this));return c("React").createElement(c("XUISingleSelector.react"),{className:"_3-93",onChange:this.props.onChange,value:this.props.selectedOption},n)};function m(){"use strict";i.apply(this,arguments)}m.propTypes={creationTime:l.number,onChange:l.func,options:l.array.isRequired,publishingConfig:l.object.isRequired,selectedOption:l.string.isRequired};f.exports=m}),null);
__d("VideoEditDialogFooter.react",["cx","fbt","BasicTypeaheadLoggerJSConstants","CommerceSelfServeNUXType","ReactComposerAttachmentType","ReactComposerBackdateTaggerButton.react","ReactComposerBackdateTaggerContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerFooterContainer.react","ReactComposerFooterActions.react","ReactComposerImplicitLocationContainer.react","ReactComposerMessagingTaggerButton.react","ReactComposerMessagingTaggerContainer.react","ReactComposerPeopleTaggerButton.react","ReactComposerPeopleTaggerContainer.react","ReactComposerProductTaggerButton.react","ReactComposerProductTaggerContainer.react","ReactComposerLocationTaggerButton.react","ReactComposerLocationTaggerContainer.react","ReactComposerSponsorTaggerButton.react","ReactComposerSponsorTaggerContainer.react","ReactComposerTaggerActions","ReactComposerTaggerButtons.react","ReactComposerTaggers.react","ReactComposerTaggerType","ReactComposerTaggerViewStyles","ComposerVideoUploadActions","ComposerVideoUploadStore","DOM","DOMContainer.react","ExpirationType","InlineBlock.react","LeftRight.react","PageContentTabConfig","PlaceSearchConstants","PostExpireDialog.react","PostScheduleDialog.react","React","ReactComposerContextProviderMixin","ReactDOM","VideoEditPublishingAction","VideoEditPublishingSelector.react","VideoEditPublishingStatus","XUIButton.react","getByPath"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("BasicTypeaheadLoggerJSConstants").EventNames,k=c("React").PropTypes,l=c("React").createClass({displayName:"VideoEditDialogFooter",mixins:[c("ReactComposerContextProviderMixin")],propTypes:{config:c("ReactComposerConfig").isRequired,contextConfig:c("ReactComposerContextConfig").isRequired,creationTime:k.number,isReferenceVideo:k.bool,onCancelButtonClick:k.func.isRequired,onSaveButtonClick:k.func.isRequired,onDeleteButtonClick:k.func,publishingConfig:k.object.isRequired,saveButtonDisabled:k.bool,privacy:k.object},statics:{taggerID:c("ReactComposerTaggerType").PEOPLE},getInitalState:function m(){return{selectedValue:this.props.publishingConfig.selectedValue}},componentDidMount:function m(){c("ReactComposerTaggerActions").handleSetTaggerShowNUX(this.props.contextConfig.composerID,c("ReactComposerTaggerType").PRODUCT,this.props.config.nuxConfig.showProductVideoEditorTaggerNux)},_getPeopleTaggerPlaceholder:function m(){return i._("Who were you with?")},_getLocationTaggerPlaceholder:function m(){return i._("Where was this taken?")},_getTaggers:function m(){if(this.props.isReferenceVideo)return null;var n=this.props.config.taggersConfig,o=c("React").createElement(c("ReactComposerPeopleTaggerContainer.react"),{placeholder:this._getPeopleTaggerPlaceholder(),showEntriesOnFocus:false,actorID:this.props.contextConfig.actorID,taggerConfig:n[this.constructor.taggerID]}),p=c("React").createElement(c("ReactComposerLocationTaggerContainer.react"),{implicitLocationEnabled:n[c("ReactComposerTaggerType").LOCATION].implicitLocationEnabled,mediaLocation:null,placeholder:this._getLocationTaggerPlaceholder(),taggerConfig:n[this.constructor.taggerID],taggerViewStyle:c("ReactComposerTaggerViewStyles").SCROLLABLE,typeaheadLoggerEventName:j.REACT_COMPOSER_LOCATION_TAGGER,typeaheadSearchSource:c("PlaceSearchConstants").SOURCE_W_COMPOSER}),q=c("React").createElement(c("ReactComposerBackdateTaggerContainer.react"),null),r=this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].enabled?c("React").createElement(c("ReactComposerSponsorTaggerContainer.react"),{viewer:this.props.config.actorConfig.viewerAccountID,showDirectBoost:this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].showSponsorTaggerDirectBoost,showSponsorRelationship:this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].showSponsorTaggerSponsorRelationship}):null,s=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],t=this.props.config.taggersConfig[c("ReactComposerTaggerType").PRODUCT],u=t.enabled?c("React").createElement(c("ReactComposerProductTaggerContainer.react"),{key:"product_container",pageID:this.props.config.targetData.targetID,productTaggerType:s.productTaggerType,reactComposerID:this.props.contextConfig.composerID,showAddProduct:t.showAddProduct,viewer:this.props.config.actorConfig.viewerAccountID}):null,v=null;if(c("getByPath")(n,[c("ReactComposerTaggerType").MESSAGING,"enabled"]))v=c("React").createElement(c("ReactComposerMessagingTaggerContainer.react"),{key:"messaging_container",reactComposerID:this.props.contextConfig.composerID});return c("React").createElement(c("ReactComposerTaggers.react"),null,o,p,q,r,u,v)},_getButtons:function m(){__p&&__p();if(this.props.isReferenceVideo||this.props.isCarouselPreviewEditing)return null;var n=c("React").createElement(c("ReactComposerPeopleTaggerButton.react"),null),o=c("React").createElement(c("ReactComposerLocationTaggerButton.react"),null,c("React").createElement(c("ReactComposerImplicitLocationContainer.react"),null)),p=c("React").createElement(c("ReactComposerBackdateTaggerButton.react"),null),q=this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].enabled?c("React").createElement(c("ReactComposerSponsorTaggerButton.react"),null):null,r=null;if(this.props.config.taggersConfig[c("ReactComposerTaggerType").PRODUCT].enabled){var s=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];r=c("React").createElement(c("ReactComposerProductTaggerButton.react"),{key:"product_button",nuxType:c("CommerceSelfServeNUXType").VIDEO_EDITOR_PRODUCT_TAGGER_BUTTON,productTaggerType:s.productTaggerType})}var t=null,u=this.props.config.taggersConfig;if(c("getByPath")(u,[c("ReactComposerTaggerType").MESSAGING,"enabled"]))t=c("React").createElement(c("ReactComposerMessagingTaggerButton.react"),{key:"messaging_button",reactComposerID:this.props.contextConfig.composerID});return c("React").createElement(c("ReactComposerTaggerButtons.react"),null,n,o,p,q,r,t)},onPublishingChange:function m(event){__p&&__p();var n=event.value;if(n===c("VideoEditPublishingAction").MAKE_DRAFT.value)this._handleUnschedulePost();else if(n===c("VideoEditPublishingAction").PUBLISH.value)this._handlePublishPost();else if(n===c("VideoEditPublishingStatus").SCHEDULED.value)this._handlePostReturningToScheduled();else if(n===c("VideoEditPublishingStatus").DRAFT.value)this._handlePostReturningToDraft();else if(n===c("VideoEditPublishingAction").EXPIRE.value)this._handleExpirePost();else if(n===c("VideoEditPublishingStatus").PUBLISHED.value)this._handlePostReturningToPublished();else if(n===c("VideoEditPublishingAction").SCHEDULE_PUBLISH.value)this._handleSchedulePost();else if(n===c("VideoEditPublishingAction").CANCEL_EXPIRATION.value)this._handleCancelExpirationPost();else if(n===c("VideoEditPublishingStatus").EXPIRING.value)this._handlePostReturningToExpiring();else if(n===c("VideoEditPublishingAction").REPUBLISH.value)this._handleRepublishPost();else if(n===c("VideoEditPublishingStatus").EXPIRED.value)this._handlePostReturningToExpired();else if(n===c("VideoEditPublishingAction").SCHEDULE_EXPIRATION.value)this._handleScheduleExpirationPost();else if(n===c("VideoEditPublishingStatus").UNPUBLISHED.value)this._handlePostReturningToUnpublished();this.setState({selectedValue:event.value})},_handleUnschedulePost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,0)},_handlePublishPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updatePublish(n,true)},_handlePostReturningToScheduled:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.scheduledPublishTime;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,o);c("ComposerVideoUploadActions").updatePublish(n,false)},_handlePostReturningToDraft:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,0);c("ComposerVideoUploadActions").updatePublish(n,false)},_handleExpirePost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,true)},_handlePostReturningToPublished:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToUnpublished:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updatePublish(n,false)},_handleSchedulePost:function m(){var n=i._("OK"),o=c("React").createElement(c("PostScheduleDialog.react"),{timezoneStr:c("PageContentTabConfig").timezone_str,onSubmit:this._handleScheduledData,submitLabel:n});o=c("ReactDOM").render(o,c("DOM").create("div"));o.show()},_handleScheduledData:function m(n){var o=n.getTime(),p=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(p,o);c("ComposerVideoUploadActions").updatePublish(p,false)},_handleCancelExpirationPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToExpiring:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.expirationTime,p=this.props.publishingConfig.expirationType;c("ComposerVideoUploadActions").updateExpiration(n,o,p);c("ComposerVideoUploadActions").updateExpire(n,false)},_handleRepublishPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToExpired:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.expirationTime,p=this.props.publishingConfig.expirationType;c("ComposerVideoUploadActions").updateExpiration(n,o,p)},_handleScheduleExpirationPost:function m(){var n=i._("OK"),o=c("React").createElement(c("PostExpireDialog.react"),{timezone:c("PageContentTabConfig").timezone_str,onSubmit:function(p,q){this._handleExpirationData(p,q);o.hide()}.bind(this),submitLabel:n});c("ComposerVideoUploadActions").updateExpire(this.props.contextConfig.composerID,false);o=c("ReactDOM").render(o,c("DOM").create("div"));o.show()},_handleExpirationData:function m(n,o){var p=this.props.contextConfig.composerID;if(n)n*=1e3;else n=this.props.publishingConfig.expirationTime;c("ComposerVideoUploadActions").updateExpiration(p,n,o)},_getDeleteButton:function m(){if(!this.props.isReferenceVideo||!this.props.onDeleteButtonClick||this.props.isCarouselPreviewEditing)return null;var n=i._("Delete");return c("React").createElement(c("XUIButton.react"),{className:"_3-91",label:n,onClick:this.props.onDeleteButtonClick})},_getFooterActions:function m(){__p&&__p();var n,o=this.props.contextConfig.composerID,p=c("ComposerVideoUploadStore").getPublish(o),q=c("ComposerVideoUploadStore").getExpire(o);if(p)n=i._("Save & Publish");else if(q)n=i._("Save & Expire");else n=i._("Save");var r=i._("Cancel"),s=this.props.publishingConfig,t;if(this.state&&this.state.selectedValue)t=this.state.selectedValue;else t=s.selectedValue;var u=c("React").createElement(c("VideoEditPublishingSelector.react"),{creationTime:this.props.creationTime,onChange:this.onPublishingChange,options:s.options,publishingConfig:this.props.publishingConfig,selectedOption:t}),v=c("React").createElement(c("InlineBlock.react"),{className:"_36b5"},c("React").createElement(c("DOMContainer.react"),null,this.props.privacy)),w=this._getDeleteButton();return c("React").createElement(c("ReactComposerFooterActions.react"),{className:"_3c2y"+(this.props.isReferenceVideo?" _1x5l":"")},this.props.isReferenceVideo||this.props.isCarouselPreviewEditing||!this.props.privacy?null:v,this.props.isReferenceVideo||this.props.isCarouselPreviewEditing?null:u,w,c("React").createElement(c("XUIButton.react"),{className:"_av_ _3-8_",label:r,onClick:this.props.onCancelButtonClick}),c("React").createElement(c("XUIButton.react"),{className:"_3-99",disabled:this.props.saveButtonDisabled,label:n,onClick:this.props.onSaveButtonClick,use:"confirm"}))},render:function m(){var n=this.props.hasImplicitLocation?"_icv":"",o="light-wash";return c("React").createElement("div",null,this._getTaggers(),c("React").createElement(c("ReactComposerFooterContainer.react"),{background:o,className:n},c("React").createElement(c("LeftRight.react"),{className:"_d6-"},this._getButtons(),this._getFooterActions())))}});f.exports=l}),null);
__d("VideoEditEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({JS_LOADED:"js_loaded",PAGE_LOAD_STARTED:"page_loaded_started",EDIT_VIDEO_ASSET:"edit_video_asset",PAGE_LOADED:"page_loaded",SAVE_ERROR:"save_error",SAVE_START:"save_start",PREFERRED_THUMBNAIL_CHANGE:"preferred_thumbnail_change",THUMBNAIL_CREATE_STARTED:"thumbnail_create_started",THUMBNAIL_CREATED:"thumbnail_created",CLICK_PROFILE_ADD_CUSTOM_THUMBNAIL:"click_profile_add_custom_thumbnail",UPLOAD_PROFILE_CUSTOM_THUMBNAIL:"upload_profile_custom_thumbnail",CANCEL_UPLOAD_PROFILE_CUSTOM_THUMBNAIL:"cancel_upload_profile_custom_thumbnail",SAVE_PROFILE_CUSTOM_THUMBNAIL:"save_profile_custom_thumbnail",DID_NOT_USE_PROFILE_CUSTOM_THUMBNAIL:"did_not_use_custom_thumbnail",SAVE_SUCCESS:"save_success",CTA_UNEXPECTED:"cta_unexpected",CTA_CHANGE_REQUEST:"cta_change_request",VIDEO_DELETE:"video_delete",CAPTIONS_UPLOADED:"captions_uploaded",CAPTIONS_REMOVED:"captions_removed",CAPTIONS_UPDATED_DEFAULT_LOCALE:"captions_updated_default_locale",NO_EDIT_PERMISSION:"no_edit_permission",CANCEL:"cancel_flow",SAVE_CLICKED:"save_clicked",REQUEST_NEW_STORY:"new_story_requested",RECEIVED_NEW_STORY:"new_story_received",REPLACED_OLD_STORY:"old_story_replaced",ERROR_NO_NEW_STORY:"error_no_new_story",ROTATION_CHANGED:"rotation_changed"})}),null);
__d("VideoEditFlow",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DIALOG:"dialog",FORM:"form"})}),null);
__d("VideoEditDialog.react",["cx","fbt","ActorURI","Arbiter","AsyncRequest","ReactComposerStatusActions","ReactComposerTaggerActions","ComposerVideoAdBreakStore","ComposerVideoPostUtils","ComposerVideoUploadActions","ComposerVideoUploadSphericalStore","ComposerVideoUploadStore","ComposerVideoShowsDispatcher","FBFeedLocations","LayerFadeOnHide","MultilingualPostMessageActions","PageContentTabVideosCopyrightReferenceLibraryActions","PagesComposer","React","ReactComposerMultilingualStatusStore","ReloadPage","StoreBasedStateMixinHelper","URLVideoThumbnail","VideoCaptionURL","VideoComposerDialogBody.react","VideoCopyrightAPI","VideoEditDialogFooter.react","VideoEditEvent","VideoEditFlow","VideoEditSource","VideoEditTypedLogger","VideoSurveySource","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","XUIText.react","XVideoEditDialogSaveController","XVideoGenerateStoryController","XVideoManagerSurveyController","XVideoEditMakeFeaturedController","ShowsVideoDataSource","ReactComposerTaggerStore","ge","goURI","setImmediate","ComposerVideoShowsStore"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;c("ReactComposerTaggerStore");j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.calculateState=function(m){"use strict";var n=c("ComposerVideoUploadStore").getTitle(m.contextConfig.composerID),o=m.isShowPage&&n.length===0,p=o;return{saveButtonDisabled:p}};function l(m){"use strict";__p&&__p();k.constructor.call(this,m);this.state={selectedThumbnail:null,errorMessage:this.props.initialErrorMessage,copyrightID:this.props.copyrightID,isCopyrighted:this.props.isCopyrighted,stage:"uploading",thumbnails:[],captions:[],liveCaptions:[],saveButtonDisabled:false,dialogVisible:false,featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null};this.$VideoEditDialog2=function(){this.setState({dialogVisible:true})}.bind(this);this.onCancel=function(){var n=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(n);c("ComposerVideoUploadSphericalStore").clearComposerData(n);c("ComposerVideoUploadStore").clearComposerData(n);this.props.dialog.hide();this.logEvent(c("VideoEditEvent").CANCEL)}.bind(this);this.onSave=function(){__p&&__p();this.setState({saveButtonDisabled:true});this.logEvent(c("VideoEditEvent").SAVE_CLICKED);CSS.show(this.props.throbber);var n=this.props.contextConfig.composerID,o=c("ComposerVideoPostUtils").getDetailsFromStore(n);if(this.shouldThrottleSave(o)){CSS.hide(this.props.throbber);this.setState({saveButtonDisabled:false,showCategoryRequiredError:true});return}c("ComposerVideoPostUtils").logSphericalComposerDataIfNeeded(n);c("ComposerVideoPostUtils").logShowsVideoData(n,this.props.videoID,c("ShowsVideoDataSource").EDIT);var p=!this.props.hideCustomThumbnail&&!this.props.isReferenceVideo;if(c("ComposerVideoPostUtils").hasInvalidBackdate(o.backdate,this.props.creationTime)){var q=i._("Invalid date: You have specified a date that is later than the creation of the post.");CSS.hide(this.props.throbber);this.setState({saveButtonDisabled:false,errorMessage:q})}else{if(this.props.isMultilingualPost)c("MultilingualPostMessageActions").submittedEdits(this.props.postID);var r=c("ReactComposerMultilingualStatusStore").getPostData(this.props.contextConfig.composerID);c("ComposerVideoPostUtils").createFormData(o,r,this.props.publishingConfig,this.state.thumbnails,this.state.captions.concat(this.state.liveCaptions),this.props.embeddable,this.props.isFTEOnly,this.props.source,p,this.props.sharedWithBusiness,this.useNewCopyrightEndpoint,this.props.canCrosspostOutsideBusiness,this.sendData)}}.bind(this);this.useNewCopyrightEndpoint=function(n){n.isReferenceVideo=this.props.isReferenceVideo;if(this.state.isCopyrighted&&!n.isCopyrighted)return c("VideoCopyrightAPI").uncopyrightVideo(this.props.pageAccessToken,this.props.pageID,this.props.videoID,this.state.copyrightID,n,"video_edit_dialog",this.onSuccessfulUncopyright);else if(this.state.isCopyrighted&&n.isCopyrighted)return c("VideoCopyrightAPI").editVideoCopyright(this.props.pageAccessToken,this.props.pageID,this.props.videoID,this.state.copyrightID,n,"video_edit_dialog");else if(n.isCopyrighted)return c("VideoCopyrightAPI").copyrightVideo(this.props.pageAccessToken,this.props.pageID,this.props.videoID,n,"video_edit_dialog",this.onSuccessfulCopyright);return null}.bind(this);this.onSuccessfulCopyright=function(n){this.setState({copyrightID:n.id,isCopyrighted:true})}.bind(this);this.onSuccessfulUncopyright=function(n){this.setState({copyrightID:null,isCopyrighted:false})}.bind(this);this.onDelete=function(){__p&&__p();if(!this.props.isReferenceVideo||!this.props.postID||this.props.source!==c("VideoEditSource").REFERENCE_LIBRARY)return;var n=function(){var p=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(p);c("ComposerVideoUploadSphericalStore").clearComposerData(p);c("ComposerVideoUploadStore").clearComposerData(p);this.props.dialog.hide();new(c("VideoEditTypedLogger"))().setEvent(c("VideoEditEvent").VIDEO_DELETE).setSource(this.props.source).setFlow(c("VideoEditFlow").DIALOG).setVideoID(this.props.videoID).log()}.bind(this),o={reference_video_asset:{id:this.props.videoID},id:this.props.postID};c("PageContentTabVideosCopyrightReferenceLibraryActions").handleDelete(this.props.pageID,[o],n.bind(this))}.bind(this);this.sendData=function(n){__p&&__p();var o=c("XVideoEditDialogSaveController").getURIBuilder().setInt("v",this.props.videoID).getURI();if(this.props.pageID)o=c("ActorURI").create(o,this.props.pageID.toString());new(c("AsyncRequest"))(o).setRawData(n).setHandler(function(p){var q=p.payload.error;if(!q)this.handleSuccessfulSave();else{CSS.hide(this.props.throbber);this.setState({errorMessage:this.convertErrorMessage(p.payload.errorMessage),stage:"post-failed",saveButtonDisabled:false})}}.bind(this)).send()}.bind(this);this.onMakeFeaturedVideo=function(){__p&&__p();var n=c("XVideoEditMakeFeaturedController").getURIBuilder().setFBID("v",this.props.videoID).setBool("is_videos_tab",c("ge")("video_hub_featured_video_container")!=null).getURI();if(this.props.pageID)n=c("ActorURI").create(n,this.props.pageID);CSS.show(this.props.throbber);new(c("AsyncRequest"))(n).setHandler(function(o){CSS.hide(this.props.throbber);var p=o.payload.error;if(!p)this.handleSuccessfulMakeFeaturedVideo(o.payload);else this.setState({errorMessage:this.convertErrorMessage(o.payload.errorMessage)})}.bind(this)).setServerDialogCancelHandler(function(){CSS.hide(this.props.throbber)}.bind(this)).send()}.bind(this);this.$VideoEditDialog4=function(){var n=this.state.featuredSuccessDialogRedirectURI;this.setState({featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null},function(){this.props.dialog.hide();c("goURI")(n,true)}.bind(this))}.bind(this);this.$VideoEditDialog5=function(){this.setState({featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null})}.bind(this);this.$VideoEditDialog6=function(){this.setState({errorMessage:null})}.bind(this);c("ComposerVideoShowsDispatcher").explicitlyRegisterStore(c("ComposerVideoShowsStore"))}l.prototype.componentWillMount=function(){"use strict";__p&&__p();this.props.dialog.subscribe("afterexpand",this.$VideoEditDialog2);this.props.dialog.subscribe("hide",this.onCancel);var m=this.props.contextConfig.composerID,n=this.props.typeaheadReporter;c("ReactComposerTaggerActions").updateTaggersSource(m,this.props.taggersSource);c("ReactComposerStatusActions").setMentionsSource(m,this.props.mentionsSource);if(n)c("ReactComposerStatusActions").setTypeaheadReporter(m,n);var o=this.getConvertedCaptions(this.props.captions),p=this.getConvertedCaptions(this.props.liveCaptions),q=this.props.thumbnailURLs.indexOf(this.props.thumbnailURL),r=this.getConvertedThumbnails(),s=r[q];this.setState({captions:o,liveCaptions:p,selectedThumbnail:s,thumbnails:r});this.updateStore(s,o,p)};l.prototype.componentDidMount=function(){"use strict";__p&&__p();this.logEvent(c("VideoEditEvent").JS_LOADED);this.$VideoEditDialog3=null;var m=function(){this.setState(this.constructor.calculateState(this.props));this.$VideoEditDialog3=null}.bind(this);this.$VideoEditDialog1=new(c("StoreBasedStateMixinHelper"))([c("ComposerVideoUploadStore")]);this.$VideoEditDialog1.subscribeCallback(function(){if(this.$VideoEditDialog3===null)this.$VideoEditDialog3=c("setImmediate")(m)}.bind(this))};l.prototype.componentWillUnmount=function(){"use strict";if(this.$VideoEditDialog1)this.$VideoEditDialog1.release();this.$VideoEditDialog1=null};l.prototype.logEvent=function(event){"use strict";new(c("VideoEditTypedLogger"))().setEvent(event).setSource(this.props.source).setFlow(c("VideoEditFlow").DIALOG).setVideoID(this.props.videoID).log()};l.prototype.updateStore=function(m,n,o){"use strict";__p&&__p();var p=this.props.publishingConfig,q=[];if(this.props.canCrosspostOutsideBusiness)q=this.props.crosspostingConfig;else if(this.props.business!==""){var r={allow:this.props.sharedWithBusiness,business:this.props.business};q.push(r)}var s={title:this.props.title,captions:n,category:this.props.category,contentTags:c("ComposerVideoPostUtils").convertContentTagToEntryArray(this.props.contentTags).concat(c("ComposerVideoPostUtils").convertFreeFormTagsToEntryArray(this.props.freeFormTags)),thumbnail:m,description:this.props.description,backdate:this.props.backdate,fov:this.props.fov,feedType:this.props.feedType,initialHeading:this.props.initialHeading,initialPitch:this.props.initialPitch,guideEnabled:this.props.guideEnabled,guideKeyframes:this.props.guideKeyframes||[],projection:this.props.projection,stereoMode:this.props.stereoMode,hasSpatialAudio:this.props.hasSpatialAudio,duration:this.props.duration,isSpherical:this.props.isSpherical,enableOmnistab:this.props.enableOmnistab,locationEntry:this.props.locationEntry,expirationTime:p.expirationTime,expirationType:p.expirationType,scheduledPublishTime:p.scheduledPublishTime,sponsorData:{sponsors:this.props.sponsorTags,directShareStatus:this.props.directShareStatus,sponsorRelationship:this.props.sponsorRelationship},productTags:this.props.productTags,tags:this.props.tags,embeddable:this.props.embeddable,isFeaturedVideo:this.props.isFeaturedVideo,isCopyrighted:this.props.isCopyrighted,monitoringType:this.props.monitoringType,selectedCategory:this.props.selectedCategory,ownershipCountries:this.props.ownershipCountries,areCountriesIncluded:this.props.areCountriesIncluded,ruleIDs:this.props.ruleIDs,attributionID:this.props.attributionID,whitelistedPartners:this.props.whitelistedPartners,isInternalVideo:this.props.isInternalVideo,isFTEOnly:this.props.isFTEOnly,rotation:this.props.rotation,permissions:q,externalVideoID:this.props.externalVideoID,existingAdBreaks:this.props.existingAdBreaks,customLabels:this.props.customLabels,enableAdBreaksExperiment:this.props.enableAdBreaksExperiment,adBreaksExperimentRevenueLossThreshold:this.props.adBreaksExperimentRevenueLossThreshold,liveCaptions:o,episodeData:this.props.episodeData,isShowPage:this.props.isShowPage};c("ComposerVideoPostUtils").updateStore(this.props.contextConfig.composerID,s)};l.prototype.getConvertedThumbnails=function(){"use strict";var m=this.props.thumbnailURLs;return m.map(function(n){return new(c("URLVideoThumbnail"))(n)})};l.prototype.getConvertedCaptions=function(m){"use strict";return m.map(function(n){var o=new(c("VideoCaptionURL"))(n.uri,n.locale,n.locale_name);if(n.is_default)o.setIsDefault(true);if(n.is_auto_generated)o.setIsAutoGenerated(true);return o})};l.prototype.shouldThrottleSave=function(m){"use strict";if(!m.isCopyrighted)return false;if(!m.selectedCategory)return true;return false};l.prototype.handleSuccessfulSave=function(){"use strict";__p&&__p();var m=this.props.contextConfig.composerID,n=this.props.source;if(n===c("VideoEditSource").PERMALINK||n===c("VideoEditSource").SNOWLIFT){c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide();c("ReloadPage").now()}else if(n===c("VideoEditSource").TIMELINE&&this.props.pageID&&this.props.storyDomID){var o=c("XVideoGenerateStoryController").getURIBuilder().getURI(),p={video_id:this.props.videoID,feed_location:c("FBFeedLocations").PAGE_TIMELINE};if(this.props.timelineIdentifier)p.timeline_identifier=this.props.timelineIdentifier;this.logEvent(c("VideoEditEvent").REQUEST_NEW_STORY);new(c("AsyncRequest"))().setURI(o).setData(p).setHandler(function(r){this.handleNewStory(r,this.props.videoID)}.bind(this)).setErrorHandler(function(r){this.logEvent(c("VideoEditEvent").ERROR_NO_NEW_STORY);var m=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}.bind(this)).send()}else if(n===c("VideoEditSource").LIBRARY||n===c("VideoEditSource").REFERENCE_LIBRARY){var q={id:this.props.postID,videoID:this.props.videoID,isCopyrighted:this.state.isCopyrighted,isReferenceVideo:this.props.isReferenceVideo};if(this.props.videoAssetID)q.videoAssetID=this.props.videoAssetID;c("Arbiter").inform("video/edited"+this.props.pageID,q);this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}else{this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}};l.prototype.showSurvey=function(){"use strict";if(this.props.showSurvey){var m=c("XVideoManagerSurveyController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("source",c("VideoSurveySource").EDIT).getURI();new(c("AsyncRequest"))(m).send()}};l.prototype.handleNewStory=function(m,n){"use strict";__p&&__p();var o=m.payload;if(o){this.logEvent(c("VideoEditEvent").RECEIVED_NEW_STORY);c("PagesComposer").replaceByID(this.props.storyDomID,o);this.logEvent(c("VideoEditEvent").REPLACED_OLD_STORY)}else this.logEvent(c("VideoEditEvent").ERROR_NO_NEW_STORY);var p=this.props.contextConfig.composerID;this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(p);c("ComposerVideoUploadSphericalStore").clearComposerData(p);c("ComposerVideoUploadStore").clearComposerData(p);this.props.dialog.hide()};l.prototype.handleSuccessfulMakeFeaturedVideo=function(m){"use strict";var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateIsFeaturedVideo(n,true);this.setState({featuredSuccessDialogVisible:true,featuredSuccessDialogRedirectURI:m.page_uri})};l.prototype.convertErrorMessage=function(m){"use strict";if(m&&m.__html)return c("React").createElement(c("XUIText.react"),{dangerouslySetInnerHTML:m});else return c("React").createElement(c("XUIText.react"),{dangerouslySetInnerHTML:{__html:m}})};l.prototype.renderFeaturedVideoSuccessDialog=function(){"use strict";var m=this.state.featuredSuccessDialogRedirectURI?c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:"Go To Your Videos Tab",use:"default",onClick:this.$VideoEditDialog4}):null;return c("React").createElement(c("XUIDialog.react"),{shown:true,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},width:445,key:"featureSuccessDialog"},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,i._("You've selected your featured video"))),c("React").createElement(c("XUIDialogBody.react"),null,i._("Your featured video is now displayed at the top of your Page's Videos tab. You can always choose a different featured video or decide not to show one.")),c("React").createElement(c("XUIDialogFooter.react"),null,m,c("React").createElement(c("XUIDialogButton.react"),{action:"confirm",label:"Got It",use:"confirm",onClick:this.$VideoEditDialog5})))};l.prototype.render=function(){"use strict";var m=null;if(this.state.errorMessage)m=c("React").createElement("div",{className:"_4tyn _3-8t"},c("React").createElement(c("XUINotice.react"),{className:"_3-8o",onDismiss:this.$VideoEditDialog6,use:"warn"},this.state.errorMessage));var n=this.props.source===c("VideoEditSource").CAROUSEL_PREVIEW,o=!this.props.hideCustomThumbnail&&!this.props.isReferenceVideo,p=null;if(this.state.featuredSuccessDialogVisible)p=this.renderFeaturedVideoSuccessDialog();return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogBody.react"),{accessToken:this.props.accessToken,allowCustomThumbnail:o,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,canEditCustomLabels:this.props.canEditCustomLabels,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,canMakeFeatured:this.props.canMakeFeaturedVideo,contextConfig:this.props.contextConfig,showAdBreaksTabBlockListSettings:this.props.showAdBreaksTabBlockListSettings,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAttributionsSection:this.props.showAttributionsSection,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,improvedContentTags:this.props.improvedContentTags,isReferenceVideo:this.props.isReferenceVideo,isSecret:this.props.isSecret,isShowPage:this.props.isShowPage,isFeatured:this.props.isFeaturedVideo,isCarouselPreviewEditing:n,isEditing:true,mentionsSource:this.props.mentionsSource,minEpisodeDuration:this.props.minEpisodeDuration,onMakeFeaturedVideo:this.onMakeFeaturedVideo,pageAccessToken:this.props.pageAccessToken,postID:this.props.postID,selectedThumbnail:this.state.selectedThumbnail,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.state.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showPermissionsTab:this.props.showPermissionsTab,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,showSphericalControlsTab:this.props.showSphericalControlsTab,showTagSelector:this.props.showTagSelector,showTagSelectorToken:this.props.showTagSelectorToken,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,showMarkURI:this.props.showMarkURI,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,thumbnails:this.state.thumbnails,videoAssetID:this.props.videoAssetID,videoID:this.props.videoID,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,dialogVisible:this.state.dialogVisible,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,showMultilingualOnMonolingualPost:this.props.showMultilingualOnMonolingualPost,isMultilingualPost:this.props.isMultilingualPost,pagePicture:this.props.pagePicture,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches}),m,c("React").createElement(c("VideoEditDialogFooter.react"),{config:this.props.config.config,contextConfig:this.props.contextConfig,creationTime:this.props.creationTime,onCancelButtonClick:this.onCancel,onSaveButtonClick:this.onSave,onDeleteButtonClick:this.onDelete,privacy:this.props.privacy,publishingConfig:this.props.publishingConfig,saveButtonDisabled:this.state.saveButtonDisabled,isCarouselPreviewEditing:n,isReferenceVideo:this.props.isReferenceVideo}),p)};f.exports=l}),null);